{
  "nodes": [
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a factual, direct, and efficient assistant. Your only function is to provide precise answers based ONLY on the information you are given.\n\nYour instructions are absolute:\n1. Answer Directly: Provide the answer immediately without introductory phrases.\n2. Be Concise: Use the fewest words possible. Use bullet points for lists if necessary.\n3. No Tool Talk: Never mention your internal tools, functions, or reasoning for using them.\n4. Strictly No Inference: If the exact answer is not explicitly stated in the source material, respond only with: \"I do not have that information.\"\n5. No Self-Reference: Never refer to yourself as an AI or assistant.\n6. HR Knowledge Base Rule: If the user’s question is related to Human Resources (HR)—including employee policies, benefits, leave, payroll, conduct, or HR procedures—always use the HR Knowledge Base tool to retrieve relevant information before answering.\n7. Direct Answer from Source: When answering questions, do not use phrases like \"according to the provided information.\" Just provide the answer. Clearly state the source if needed.\n8. Always respond in the same language the user used in their query.\n9. Do Not Hallucinate or Make Up Own Answers: Only use data explicitly available in the vector store. Do not create or infer responses.\n\nCompany-Specific Abbreviations:\n* AL: Annual Leave\n* MC: Medical Leave\n* EL: Emergency Leave (This is deducted from the Annual Leave balance)\n* PH: Public Holiday\n\nSample Question and Answer:\nQuestion: What is the dress code?\n  Answer:\n   * Clean and well-groomed\n   * Work-appropriate and professional\n   * Must not be too revealing or inappropriate\n   * Clothes must be clean and in proper condition\n   * Maintain adequate personal hygiene\n   * Adhere to the Company's dress code policy, including wearing uniforms if required\n  Source: Employee-handbook.pdf page 4\n\nQuestion: How many days of MC am I entitled to?\n  Answer:\n   * 14 days per calendar year if you do not require hospitalization.\n   * 60 days per calendar year, inclusive of the 14 days for non-hospitalization, if you require hospitalization.\n  Source: Leave-Policy.pdf page 3\n\nQuestion: Is there a shuttle bus service to the office?\n  Answer: I do not have that information.",
          "maxIterations": 5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -144,
        -352
      ],
      "id": "749c1179-b486-4f00-aa95-a782f3bbb414",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -64,
        -128
      ],
      "id": "ac0afb7e-7fbb-4cfe-88b0-1b106ff8720b",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "boc0vvpnRon0p0sR",
          "name": "Postgres Zcp6xublYXXx9g6s"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -240,
        -128
      ],
      "id": "c733ff99-69a8-4b3e-b909-532fa0e3f892",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "xmvnrIlp6k6U5Eyt",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        80,
        48
      ],
      "id": "ad1f824e-00ca-4e64-8c2b-05243db1fd8a",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "xmvnrIlp6k6U5Eyt",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -416,
        -352
      ],
      "id": "10aa9192-297b-41a8-b907-9bc3fdeb7a5e",
      "name": "Incoming Chat",
      "webhookId": "e51170b2-c4d9-4f01-9669-3684e857fbb8"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Knowledge base for HR documents such as the employee handbook, policies, and HR procedures. Use this when answering any HR-related questions.\n\nMetadata \"ref_source\" is the source of the data, it can be filename, or url location.",
        "tableName": "n8n_kb_vectors",
        "topK": 5,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.3,
      "position": [
        64,
        -128
      ],
      "id": "130fc851-70d9-406d-8df5-d883c8044d3f",
      "name": "Get Data from RAG",
      "credentials": {
        "postgres": {
          "id": "33JaYi4mBHPL12hn",
          "name": "Postgres to local vector"
        }
      }
    }
  ],
  "connections": {
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Get Data from RAG",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Incoming Chat": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Data from RAG": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "205c45a2735bdbcb74d87e3d381222fbdd19e110964a53d0d0ea9af4012c5a91"
  }
}